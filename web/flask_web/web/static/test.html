<!-- This file is part of https://github.com/jainamoswal/Flask-Example. -->
<!-- Usage covered in IDC lICENSE -->
<!-- Jainam Oswal. jainam.me -->
<html>

<head>

    <script src="/js/jquery.min.js"></script>
    
    <script src="/js/MyUtility.js"></script>
    <script src="/js/jquery.dataTables.min.js"></script>
    <link href="/css/jquery.dataTables.min.css" rel="stylesheet">
    </script>
    <style>
    
    .dataTables_length{display: none;}
    .dataTables_filter{display: none;}
    .dataTables_paginate {display: none;}
    .dataTables_info {display: none;}
    </style>
</head>

<body>
    <h1>AddressAliasID </h1><input type="text" id="AliasID" value="20220422123515945336"/>
    <button onclick="queryAddress()">Query</button> 
</body>
<table id="table4" style="width: 100%;">

    <thead>

        <tr>

            <th>add_on</th>
 
            <th>dt</th>
 
            <th>suser</th>
            <th>sensor</th>
            <th>gateway</th>
 
            <th>sensor_type</th>
 
            <th>sensor_value</th>
 
          </tr>

    </thead>

</table>
<script>   
function cleanData(d){
    d=d+"";
    d=d.replaceAll("null", "");
    return d;
}
function queryAddress(){
    var aid= $("#AliasID").val();
    queryData("/test?aid="+aid) ;
}  
 var table = {};
function queryData(url){  


console.log(url);
table.ajax.url( url ).load();
}
function initTable(url){
    /*AJAX Response Binding*/
        
    table =    $('#table4').DataTable({

         "processing" : true,
       "serverSide" : true,
       "serverMethod" : 'post',
ajax: {

    url:url ,

    dataSrc: ""

},

columns: [ 

    {
        data: 'add_on', render: function (data, type, row) {

            return row.add_on ;

        }
    }  , {
        data: 'add_on', render: function (data, type, row) {

            return row.add_on ;

        }
    }   , {
        data: 'dt', render: function (data, type, row) {

            return data ;

        }
    }   , {
        data: 'suser', render: function (data, type, row) {

            return data ;

        }
    }   , {
        data: 'sensor', render: function (data, type, row) {

            return data ;

        }
    }     , {
        data: 'sensor_type', render: function (data, type, row) {

            return data ;

        }
    }     , {
        data: 'sensor_value', render: function (data, type, row) {

            return data ;

        }
    }     
],

"pageLength": 100

});
}
$(function () {
   initTable('/test');
       //    $.ajax({url: "/test", success: function(result){
       //   console.log(result) ;
      //   $("#template_tab").tmpl({ Table: result }).appendTo("#context");
       //}});  
        
         //   })  

    
    });
</script>


</html>